(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{2394:(e,t,a)=>{"use strict";a.d(t,{$o:()=>n,MN:()=>s,Rh:()=>i,ee:()=>u,iS:()=>h,oB:()=>l,r$:()=>y});var r=a(70404),d=a(76698),o=a(23292);let i=(0,r.xP)({reducerPath:"beadApi",baseQuery:(0,d.cw)({baseUrl:o.x,prepareHeaders:(e,t)=>{let{getState:a}=t,r=a().auth.token;return r&&e.set("Authorization","Bearer ".concat(r)),e}}),tagTypes:["Bead"],endpoints:e=>({getBeads:e.query({query:e=>{let{page_number:t,page_size:a}=e;return"beads/getall?page_number=".concat(t,"&page_size=").concat(a)},providesTags:["Bead"]}),getBeadById:e.query({query:e=>"beads/getById/".concat(e),providesTags:(e,t,a)=>[{type:"Bead",id:a}]}),getBeadByThreadId:e.query({query:e=>{let{threadId:t,page_number:a,page_size:r}=e;return"beads/by-thread/".concat(t,"?page_no=").concat(a,"&page_size=").concat(r)},providesTags:["Bead"]}),addBead:e.mutation({query:e=>({url:"beads/create",method:"POST",body:e}),invalidatesTags:["Bead"]}),updateBead:e.mutation({query:e=>{let{id:t,body:a}=e;return{url:"beads/updateBead/".concat(t),method:"PUT",body:a}},invalidatesTags:(e,t,a)=>{let{id:r}=a;return[{type:"Bead",id:r}]}}),deleteBead:e.mutation({query:e=>({url:"beads/deleteBead/".concat(e),method:"DELETE"}),invalidatesTags:["Bead"]}),uploadBeadImage:e.mutation({query:e=>{let{beadId:t,formData:a}=e;return{url:"beads/uploadImage/".concat(t),method:"POST",body:a}},invalidatesTags:(e,t,a)=>{let{beadId:r}=a;return[{type:"Bead",id:r}]}}),createBeadWithImage:e.mutation({async queryFn(e,t,a,r){let{beadData:d,imageFile:o}=e,i=await r({url:"beads/create",method:"POST",body:d});if(i.error)return{error:i.error};let n=i.data;if(o&&n._id){let e=new FormData;e.append("image",o);let t=await r({url:"beads/uploadImage/".concat(n._id),method:"POST",body:e});if(t.error)return{error:t.error};let a=t.data;a.imageUrl&&await r({url:"beads/updateBead/".concat(n._id),method:"PUT",body:{imageUrl:a.imageUrl}})}return{data:n}},invalidatesTags:["Bead"]})})}),{useGetBeadsQuery:n,useGetBeadByIdQuery:s,useGetBeadByThreadIdQuery:u,useAddBeadMutation:l,useUpdateBeadMutation:c,useDeleteBeadMutation:h,useUploadBeadImageMutation:y,useCreateBeadWithImageMutation:g}=i},3051:(e,t,a)=>{Promise.resolve().then(a.bind(a,10277)),Promise.resolve().then(a.t.bind(a,16219,23)),Promise.resolve().then(a.t.bind(a,27590,23)),Promise.resolve().then(a.t.bind(a,19324,23))},10277:(e,t,a)=>{"use strict";a.d(t,{Providers:()=>P});var r=a(95155),d=a(5710),o=a(61328),i=a(18091),n=a(2394),s=a(63293),u=a(49861),l=a(58645),c=a(27781),h=a(52);let y={key:"root",storage:i.A,whitelist:["auth"]},g=(0,h.HY)({auth:l.Ay,notification:c.A,[n.Rh.reducerPath]:n.Rh.reducer,[s.i$.reducerPath]:s.i$.reducer,[u.vI.reducerPath]:u.vI.reducer}),p=(0,o.rL)(y,g),m=(0,d.U1)({reducer:p,middleware:e=>e({serializableCheck:!1}).concat(n.Rh.middleware,s.i$.middleware,u.vI.middleware)}),T=(0,o.GM)(m);var v=a(34540),b=a(97730),q=a(19988),B=a(56671);function P(e){let{children:t}=e;return(0,r.jsxs)(v.Kq,{store:m,children:[(0,r.jsx)(b.Q,{loading:null,persistor:T,children:(0,r.jsx)(q.c4,{apiKey:"AIzaSyD39GB_P46JB31kUlFNqAagm3WzP2Lnlac",onLoad:()=>console.log("Maps API has loaded."),children:t})}),(0,r.jsx)(B.l$,{})]})}},19324:()=>{},23292:(e,t,a)=>{"use strict";a.d(t,{x:()=>r});let r="https://backend.kandicompass.com/"},27781:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,j:()=>i});var r=a(5710);let d={refecthNotification:!1};console.log("initialState",d);let o=(0,r.Z0)({name:"notification",initialState:d,reducers:{setRefetchNotification:(e,t)=>{e.refecthNotification=t.payload}}}),{setRefetchNotification:i}=o.actions,n=o.reducer},49861:(e,t,a)=>{"use strict";a.d(t,{K4:()=>c,Mc:()=>p,Md:()=>T,XT:()=>h,_i:()=>u,eW:()=>s,ei:()=>y,nB:()=>g,ow:()=>m,pu:()=>v,vI:()=>i});var r=a(70404),d=a(76698),o=a(23292);let i=(0,r.xP)({reducerPath:"threadApi",baseQuery:(0,d.cw)({baseUrl:o.x,prepareHeaders:(e,t)=>{let{getState:a}=t,r=a().auth.token;return r&&e.set("Authorization","Bearer ".concat(r)),e}}),tagTypes:["Thread","Invitations"],endpoints:e=>({getThreads:e.query({query:()=>"",providesTags:["Thread"]}),getThreadById:e.query({query:e=>"threads/getById/".concat(e),providesTags:(e,t,a)=>[{type:"Thread",id:a}]}),addThread:e.mutation({query:e=>({url:"threads/create",method:"POST",body:e}),invalidatesTags:["Thread"]}),updateThread:e.mutation({query:e=>{let{id:t,body:a}=e;return{url:"threads/update/".concat(t),method:"PUT",body:a}},invalidatesTags:(e,t,a)=>{let{id:r}=a;return[{type:"Thread",id:r}]}}),deleteThread:e.mutation({query:e=>({url:"threads/deleteThread/".concat(e),method:"DELETE"}),invalidatesTags:["Thread"]}),uploadThreadImage:e.mutation({query:e=>{let{threadId:t,formData:a}=e;return{url:"threads/uploadImage/".concat(t),method:"POST",body:a}},invalidatesTags:(e,t,a)=>{let{threadId:r}=a;return[{type:"Thread",id:r}]}}),getAllThreads:e.query({query:e=>{let{page_number:t,page_size:a}=e;return{url:"threads/getall",method:"GET",params:{page_number:t,page_size:a}}}}),getThreadsByOwner:e.query({query:e=>{let{id:t,page_number:a,page_size:r}=e;return{url:"threads/getByOwner/".concat(t),method:"GET",params:{page_number:a,page_size:r}}}}),getThreadsByMember:e.query({query:e=>{let{id:t,page_number:a,page_size:r}=e;return{url:"threads/getByMember/".concat(t),method:"GET",params:{page_number:a,page_size:r}}}}),sendInvitation:e.mutation({query:e=>({url:"threads/create-invite",method:"POST",body:e})}),getInvitations:e.query({query:e=>({url:"threads/get-invitations-by-email/".concat(e),method:"GET"}),providesTags:(e,t,a)=>[{type:"Invitations",id:"invites-".concat(a)}],keepUnusedDataFor:300}),respondeToInvitation:e.mutation({query:e=>({url:"threads/respond-to-invite",method:"POST",body:e})})})}),{useGetThreadsQuery:n,useGetThreadByIdQuery:s,useAddThreadMutation:u,useUpdateThreadMutation:l,useDeleteThreadMutation:c,useUploadThreadImageMutation:h,useGetAllThreadsQuery:y,useGetThreadsByOwnerQuery:g,useGetThreadsByMemberQuery:p,useSendInvitationMutation:m,useGetInvitationsQuery:T,useRespondeToInvitationMutation:v}=i},58645:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>c,Mj:()=>l,gV:()=>i,p:()=>d,ri:()=>n});var r=a(5710);let d=()=>async e=>{if(!navigator.geolocation){e(u());return}navigator.geolocation.getCurrentPosition(t=>{e(s({latitude:t.coords.latitude,longitude:t.coords.longitude}))},t=>{console.error("Geolocation error:",t.message),alert('Location access denied.\n\nClick the lock â“˜ icon near the address bar.\nFind "Location" and allow access.\nThen reload the page.'),e(u())})},o=(0,r.Z0)({name:"auth",initialState:{user:null,token:void 0,isLocationEnabled:!1,coordinates:null,locationDenied:!1},reducers:{setUser:(e,t)=>{e.user=t.payload},logout:e=>{fetch("/api/auth/logout",{method:"POST"}).then(()=>{window.location.href="/"}),e.user=null},setCoordinates:(e,t)=>{e.coordinates=t.payload,e.isLocationEnabled=!0,e.locationDenied=!1},setLocationDenied:e=>{e.coordinates=null,e.locationDenied=!0,e.isLocationEnabled=!1},disableLocation:e=>{e.isLocationEnabled=!1,e.coordinates=null,e.locationDenied=!1}}}),{setUser:i,logout:n,setCoordinates:s,setLocationDenied:u,disableLocation:l}=o.actions,c=o.reducer},63293:(e,t,a)=>{"use strict";a.d(t,{$f:()=>l,VL:()=>u,h8:()=>s,i$:()=>i,i0:()=>n,ik:()=>h,xh:()=>c});var r=a(70404),d=a(76698),o=a(23292);let i=(0,r.xP)({reducerPath:"userApi",baseQuery:(0,d.cw)({baseUrl:o.x,prepareHeaders:(e,t)=>{let{getState:a}=t,r=a().auth.token;return r&&e.set("Authorization","Bearer ".concat(r)),e}}),tagTypes:["User"],endpoints:e=>({createUser:e.mutation({query:e=>({url:"User/create",method:"POST",body:e}),invalidatesTags:["User"]}),loginUser:e.mutation({query:e=>({url:"User/login",method:"POST",body:e})}),getAllUsers:e.query({query:()=>"User/getAll",providesTags:["User"]}),getUserById:e.query({query:e=>{let{id:t}=e;return"User/getById/".concat(t)},providesTags:(e,t,a)=>{let{id:r}=a;return[{type:"User",id:r}]}}),uploadProfilePicture:e.mutation({query:e=>{let{id:t,file:a}=e,r=new FormData;return r.append("file",a),{url:"User/uploadImage/".concat(t),method:"POST",body:r}},invalidatesTags:(e,t,a)=>{let{id:r}=a;return[{type:"User",id:r}]}}),updateUserProfile:e.mutation({query:e=>{let{id:t,data:a}=e;return{url:"User/update/".concat(t),method:"PUT",body:a}}})})}),{useCreateUserMutation:n,useLoginUserMutation:s,useGetAllUsersQuery:u,useGetUserByIdQuery:l,useUploadProfilePictureMutation:c,useUpdateUserProfileMutation:h}=i}},e=>{var t=t=>e(e.s=t);e.O(0,[9244,2533,4540,5710,404,6671,9988,3662,8441,1684,7358],()=>t(3051)),_N_E=e.O()}]);