(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7535],{6654:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return l}});let r=a(12115);function l(e,t){let a=(0,r.useRef)(null),l=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=a.current;e&&(a.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(a.current=s(e,r)),t&&(l.current=s(t,r))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},23292:(e,t,a)=>{"use strict";a.d(t,{x:()=>r});let r="https://backend.kandicompass.com/"},28656:(e,t,a)=>{Promise.resolve().then(a.bind(a,64249))},49861:(e,t,a)=>{"use strict";a.d(t,{K4:()=>u,Mc:()=>g,Md:()=>x,XT:()=>h,_i:()=>o,eW:()=>d,ei:()=>p,nB:()=>m,ow:()=>f,pu:()=>b,vI:()=>n});var r=a(70404),l=a(76698),s=a(23292);let n=(0,r.xP)({reducerPath:"threadApi",baseQuery:(0,l.cw)({baseUrl:s.x,prepareHeaders:(e,t)=>{let{getState:a}=t,r=a().auth.token;return r&&e.set("Authorization","Bearer ".concat(r)),e}}),tagTypes:["Thread","Invitations"],endpoints:e=>({getThreads:e.query({query:()=>"",providesTags:["Thread"]}),getThreadById:e.query({query:e=>"threads/getById/".concat(e),providesTags:(e,t,a)=>[{type:"Thread",id:a}]}),addThread:e.mutation({query:e=>({url:"threads/create",method:"POST",body:e}),invalidatesTags:["Thread"]}),updateThread:e.mutation({query:e=>{let{id:t,body:a}=e;return{url:"threads/update/".concat(t),method:"PUT",body:a}},invalidatesTags:(e,t,a)=>{let{id:r}=a;return[{type:"Thread",id:r}]}}),deleteThread:e.mutation({query:e=>({url:"threads/deleteThread/".concat(e),method:"DELETE"}),invalidatesTags:["Thread"]}),uploadThreadImage:e.mutation({query:e=>{let{threadId:t,formData:a}=e;return{url:"threads/uploadImage/".concat(t),method:"POST",body:a}},invalidatesTags:(e,t,a)=>{let{threadId:r}=a;return[{type:"Thread",id:r}]}}),getAllThreads:e.query({query:e=>{let{page_number:t,page_size:a}=e;return{url:"threads/getall",method:"GET",params:{page_number:t,page_size:a}}}}),getThreadsByOwner:e.query({query:e=>{let{id:t,page_number:a,page_size:r}=e;return{url:"threads/getByOwner/".concat(t),method:"GET",params:{page_number:a,page_size:r}}}}),getThreadsByMember:e.query({query:e=>{let{id:t,page_number:a,page_size:r}=e;return{url:"threads/getByMember/".concat(t),method:"GET",params:{page_number:a,page_size:r}}}}),sendInvitation:e.mutation({query:e=>({url:"threads/create-invite",method:"POST",body:e})}),getInvitations:e.query({query:e=>({url:"threads/get-invitations-by-email/".concat(e),method:"GET"}),providesTags:(e,t,a)=>[{type:"Invitations",id:"invites-".concat(a)}],keepUnusedDataFor:300}),respondeToInvitation:e.mutation({query:e=>({url:"threads/respond-to-invite",method:"POST",body:e})})})}),{useGetThreadsQuery:i,useGetThreadByIdQuery:d,useAddThreadMutation:o,useUpdateThreadMutation:c,useDeleteThreadMutation:u,useUploadThreadImageMutation:h,useGetAllThreadsQuery:p,useGetThreadsByOwnerQuery:m,useGetThreadsByMemberQuery:g,useSendInvitationMutation:f,useGetInvitationsQuery:x,useRespondeToInvitationMutation:b}=n},64249:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var r=a(95155),l=a(12115);let s={src:"/_next/static/media/download.f390b4f4.svg",height:73,width:98,blurWidth:0,blurHeight:0};var n=a(66766),i=a(49861);let d=()=>{let[e,t]=(0,l.useState)([]),[a,d]=(0,l.useState)("NZ"),[o,c]=(0,l.useState)("R4025"),[u,h]=(0,l.useState)("R4025"),[p,m]=(0,l.useState)(!0),[g,f]=(0,l.useState)(!1),[x]=(0,i._i)(),[b]=(0,i.XT)(),y=(0,l.useCallback)(e=>{let a=e.target.files;if(a&&a.length>0){let e=Array.from(a).map(e=>({file:e,previewUrl:URL.createObjectURL(e)}));t(t=>[...t,...e])}},[]),v=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation();let a=e.dataTransfer.files;if(a&&a.length>0){let e=Array.from(a).map(e=>({file:e,previewUrl:URL.createObjectURL(e)}));t(t=>[...t,...e])}},[]),j=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),T=a=>{let r=[...e];URL.revokeObjectURL(r[a].previewUrl),r.splice(a,1),t(r)},w=async()=>{try{f(!0);let t=await x({threadName:a,threadId:o,charmLocation:u}).unwrap();for(let a of(console.log("Thread created:",t),e)){let e=new FormData;e.append("image",a.file);let t=await b({threadId:o,formData:e}).unwrap();console.log("Image uploaded:",t)}alert("Thread created and images uploaded successfully!")}catch(e){console.error("Error saving thread:",e),alert("Something went wrong while saving the thread.")}finally{f(!1)}},F=[];for(let t=0;t<e.length;t+=4)F.push(e.slice(t,t+4));return(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen px-4 py-20 bg-[#170F24]",children:(0,r.jsxs)("div",{className:"mt-10 w-full max-w-[700px]",children:[(0,r.jsx)("h1",{className:"text-center mb-8",style:{fontFamily:"Orbitron",fontWeight:700,fontSize:"46px",lineHeight:"52px",background:"linear-gradient(90.24deg, #FF005D 50.79%, #00D1FF 81.07%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Upload"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-white mb-2",children:"Thread Name"}),(0,r.jsx)("input",{type:"text",value:a,onChange:e=>d(e.target.value),className:"w-full p-3 text-white bg-transparent border-2 border-transparent",style:{borderImage:"linear-gradient(to right, #FF005D, #00D1FF) 1",outline:"none"}})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-white mb-2",children:"Thread ID"}),(0,r.jsx)("input",{type:"text",value:o,readOnly:!0,className:"w-full p-3 text-white border-2 border-transparent bg-[#170F24]",style:{borderImage:"linear-gradient(to right, #FF005D, #00D1FF) 1",outline:"none"}})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("p",{className:"text-white mb-2",children:"Add Your Kendi Charm Image"}),(0,r.jsx)("div",{className:"border-2 border-transparent bg-[#170F24] text-white text-center min-h-[325px] w-full flex flex-col justify-center items-center gap-4 p-4",style:{borderImage:"linear-gradient(to right, #FF005D, #00D1FF) 1",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.3)"},onDrop:v,onDragOver:j,children:e.length>0?(0,r.jsx)("div",{className:"w-full",children:F.map((e,t)=>(0,r.jsx)("div",{className:"flex justify-center gap-4 mb-4",children:e.map((e,a)=>{let l=4*t+a;return(0,r.jsxs)("div",{className:"relative w-1/4 aspect-square",children:[(0,r.jsx)(n.default,{src:e.previewUrl,alt:"Uploaded preview ".concat(l+1),layout:"fill",objectFit:"cover",className:"rounded-md"}),(0,r.jsx)("button",{className:"absolute top-1 right-1 bg-black bg-opacity-50 text-white p-1 rounded-full text-xs",onClick:()=>T(l),children:"\xd7"})]},l)})},t))}):(0,r.jsx)("div",{className:"flex flex-col items-center",children:(0,r.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,r.jsx)(n.default,{src:s,alt:"Upload Icon",className:"w-[60px] mb-2 ml-[150px]"}),(0,r.jsxs)("p",{className:"text-sm text-white",children:[(0,r.jsx)("span",{className:"text-[#FF005D]",children:"CLICK TO DISC/HIS_OR.DRAW.IF HERE"}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-gray-400",children:"FOR THIS PINK"}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-gray-400",children:"LIKABOILS"})]}),(0,r.jsx)("input",{id:"file-upload",type:"file",className:"hidden",accept:".jpg,.jpeg,.png,.svg",onChange:y,multiple:!0})]})})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-white mb-2",children:"Set Your Charmâ€™s Location"}),(0,r.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),className:"w-full p-3 text-white bg-transparent border-2 border-transparent",style:{borderImage:"linear-gradient(to right, #FF005D, #00D1FF) 1",outline:"none"}})]}),(0,r.jsxs)("div",{className:"mt-6 flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",className:"accent-[#FF005D]",checked:p,onChange:e=>m(e.target.checked)}),(0,r.jsx)("label",{className:"text-white text-sm",children:"Only you or specific people can view this thread."})]}),(0,r.jsx)("div",{className:"mt-8 flex justify-center",children:(0,r.jsx)("button",{className:"px-8 py-3 bg-gradient-to-r from-[#FF005D] to-[#00D1FF] text-white font-semibold rounded-md shadow-md hover:opacity-90 transition",onClick:w,disabled:0===e.length||g,children:"SAVE THREAD"})})]})})}},66766:(e,t,a)=>{"use strict";a.d(t,{default:()=>l.a});var r=a(71469),l=a.n(r)},71469:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return d},getImageProps:function(){return i}});let r=a(88229),l=a(38883),s=a(33063),n=r._(a(51193));function i(e){let{props:t}=(0,l.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let d=s.Image}},e=>{var t=t=>e(e.s=t);e.O(0,[4540,5710,404,3063,8441,1684,7358],()=>t(28656)),_N_E=e.O()}]);